<!DOCTYPE html>
<html>
<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>


    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>

<body>

<div class="container">
    <h1>Horse ID</h1>

    <div class="card">
    <a href="#"  id="start" class="btn btn-large waves-effect waves-light orange">Start</a>
        </div>

      <div class="card">
    <a href="#"  id="next" class="btn btn-large waves-effect waves-light orange">Chip Works</a>
        </div>

        <div class="card">
    <a href="#"  id="query" class="btn btn-large waves-effect waves-light orange">Query</a>
        </div>

        <div class="card">
    <a href="#"  id="map_query" class="btn btn-large waves-effect waves-light orange">Map Query</a>
        </div>

    <div id="response"></div>

</div>


</body>
<script>

    MODEL = false;
    

    //starts the server
    $(document).on("click", "#start", function() {
        var sel = this;
        var data={hello:"world"};
         $.ajax({
            url:"/model/start/",
            method: "PUT",
            dataType: "JSON",
            data: JSON.stringify(data),
            success: function (json) {
                $("#response").append("<h4>"+json.output+"</h4>");
                MODEL = json;
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                }
            });
     });




    //builds default system
    $(document).on("click", "#next", function() {
        var sel = this;
        var data = { node : "chip_work", result: "True" };

         $.ajax({
            url: "/model/build/",
            method: "PUT",
            dataType: "JSON",
            data: JSON.stringify(data),
            success: function (json) {
                $("#response").append("<h4>"+json.output+"</h4>");
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    });




    //makes query
    $(document).on("click", "#query", function() {
        var sel = this;
        var data = { variables : ["chip_work"], evidences:{id_verifying: 0, id_using: 0, owner_sta: 0} };

        $.ajax({
            url: "/model/query/",
            method: "PUT",
            dataType: "JSON",
            data: JSON.stringify(data),
            success: function (json) {
                $("#response").append("<h4>"+json.output+"</h4>");
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    });




    //makes map queries
    $(document).on("click", "#map_query", function() {
        var sel = this;
        var data = { "variables" : ["chip_work", "identifiability"], "evidences":{"id_verifying": 0, "id_using": 0, "owner_sta": 0} };

        $.ajax({
            url: "/model/map_query/",
            method: "PUT",
            dataType: "JSON",
            data: JSON.stringify(data),
            success: function (json) {
                $("#response").append("<h4>"+json.output+"</h4>");
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });
    });

</script>
</html>
